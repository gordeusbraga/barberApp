<body>
    <header class="mb-10">
        <app-header></app-header>
    </header>
    <main>

        <section class="mb-15 ">
            <div class="border-b-2 border-purple-600 w-[90%] ml-10">
                <h2 class="text-2xl font-semibold text-gray-900 mb-4 inline-block pb-1">
                    Meus Agendamentos
                </h2>
            </div>

            <div *ngIf="isLoadingAgendamentos" class="text-center p-10">
                <p class="text-lg text-gray-500">Carregando agendamentos...</p>
            </div>

            <div *ngIf="!isLoadingAgendamentos && agendamentos.length === 0"
                class="bg-white rounded-lg flex flex-col items-center justify-center p-6 md:p-10 text-center">
                <img src="assets/calendar.png" alt="Nenhum Agendamento" class="h-10" />
                <p class=" mt-4 text-lg text-gray-500">Nenhum Agendamento Encontrado</p>
            </div>

            <div *ngIf="!isLoadingAgendamentos && agendamentos.length > 0" class="w-[90%] pl-[10%] mt-6 space-y-4">

                <div *ngFor="let agendamento of agendamentos"
                    class="p-4 bg-white rounded-xl shadow-md border border-gray-200 flex flex-col sm:flex-row justify-between">

                    <div class="flex items-center">
                        <img src="assets/scissors.png" alt="Serviço" class="w-12 h-12 rounded-full hidden sm:block">
                        <div class="sm:ml-4">
                            <p class="font-semibold text-lg text-gray-800">{{ agendamento.services.name }}</p>
                            <p class="text-sm text-gray-500">{{ agendamento.services.barber_name }}</p>
                            <button (click)="cancelar(agendamento)"
                                class="flex-1 rounded-lg bg-red-600 px-6 mt-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-700">
                                Cancelar
                            </button>
                        </div>
                    </div>

                    <div classa="text-left sm:text-right mt-4 sm:mt-0">
                        <p class="font-semibold text-purple-600">
                            {{ agendamento.appointment_time | date:'dd/MM/yyyy' }}
                        </p>
                        <p class="text-lg text-gray-900 font-medium">
                            {{ agendamento.appointment_time | date:'HH:mm' }}
                        </p>
                    </div>
                </div>
            </div>


        </section>

        <section class="mb-10">
            <div class="border-b-2 border-purple-600 w-[90%] ml-10">
                <h2 class="text-2xl font-semibold text-gray-900 mb-4 inline-block pb-1">
                    Serviços
                </h2>
            </div>

            <div *ngIf="isLoadingServicos" class="text-center p-10">
                <p class="text-lg text-gray-500">Carregando serviços...</p>
            </div>

            <div *ngIf="!isLoadingServicos && servicosCadastrados.length > 0"
                class="px-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 w-full mt-5">

                <div *ngFor="let servico of servicosCadastrados"
                    class="p-4 bg-white rounded-xl shadow-md border border-gray-200 flex justify-between items-center">
                    <div class="p-4">
                        <p class="font-semibold text-gray-800">{{ servico.name }}</p>
                        <p class="text-sm text-gray-500">{{ servico.barber_name }}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold text-purple-600">R$ {{ servico.price }}</p>
                        <p class="text-sm text-gray-500">{{ servico.duration_minutes }} min</p>
                    </div>
                </div>
            </div>

            <div class="w-[90%] ml-10 mt-6 flex justify-center">
                <a routerLink="/services"
                    class="rounded-lg bg-purple-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
                    Ver Serviços
                </a>
            </div>
        </section>

    </main>
</body>